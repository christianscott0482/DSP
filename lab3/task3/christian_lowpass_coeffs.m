% This script is intended to take an arbitrary collection of poles, zeros,
% and a gain coefficient to be formatted into second-order sections for use
% in C code.
%
% Authors: (ECE 486 Group 8, Spring 2018)
%   Christian Auspland, Matt Blanchard, Ben Grooms

% Set of zeros(arbitrary)
z = [ ...
0.564139941690963 + 0.533527696793003i, ...
0.564139941690963 - 0.533527696793003i, ...
0.354227405247814 + 0.428571428571429i, ...
0.354227405247814 - 0.428571428571429i, ...
0.293002915451895 + 0.909620991253645i, ...
0.293002915451895 - 0.909620991253645i ...
];

% Set of poles(arbitrary)
p = [ ...
-0.153061224489796 + 0.201166180758018i, ...
-0.153061224489796 - 0.201166180758018i, ...
-0.389212827988338 + 0.542274052478135i, ...
-0.389212827988338 - 0.542274052478135i, ...
-0.205539358600583 + 0.970845481049564i, ...
-0.205539358600583 - 0.970845481049564i ...
];

% Gain factor(arbitrary)
k = 0.0508;

sos = zp2sos(z, p, k);

for i = 1 : ceil(size(z, 2) / 2)
    coeff((5*i - 4) : 5*i)= sos(i, [1:3,5:6]);
end
    
csvwrite('task_3.csv', coeff);
    

